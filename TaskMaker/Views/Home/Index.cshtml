<html>
<head>
    <link href="~/Content/app.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="~/Scripts/angular.min.js"></script>
    <script src="~/Scripts/app.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-drag-and-drop-lists/2.1.0/angular-drag-and-drop-lists.min.js"></script>
</head>
  <body ng-app="myApp">
      <div class="container">
          <h2 class="text-center">Task Maker List</h2>
          <div class="container" ng-controller="moduleController">
              <div class="row">
                  <div class="col-6"></div>
                  <div class="col-auto">
                      <div class="card m-3 text-left" style="width: 12rem">
                          <div class="card-header pointer" ng-click="OnPostData('Module','post', 0)">
                              {{CModule}}
                          </div>
                      </div>
                  </div>
                  <div class="col-auto">
                      <div class="card m-3 text-left" style="width: 12rem">
                          <div class="card-header pointer" ng-click="OnMoveData('Module', moduleData)">
                              <i class="fa fa-undo"></i>&nbsp;{{RModule}}
                          </div>
                      </div>
                  </div>
              </div>
              @*<"main-menu">*@
              <div class="row">
                  @*module*@
                  <div class="col" ng-if="moduleData">
                      <div class="main-menu">
                          <ul ng-repeat="module in moduleData" id="module">
                              @*status: false*@
                              <li class="item-c" id="module-{{module.moduleId}}" ng-if="!module.moduleStatus">
                                  <a href="#module-{{module.moduleId}}" class="profile-btn  js--box">
                                      <i class="fa fa-file-text"></i>{{module.moduleName}}
                                  </a>
                                  <div class="sub-menu x-menu center-position">
                                      <a href="#module" ng-click="OnRestore('Module', module.moduleId)">
                                          <i class="fa fa-refresh" style="color: blue; padding-right: 5px"> &nbsp; Restore data</i>
                                      </a>
                                  </div>
                              </li>
                              @*status: true*@
                              <li class="item-c" id="module-{{module.moduleId}}" ng-if="module.moduleStatus">
                                  <a href="#module-{{module.moduleId}}" class="profile-btn js--box" ng-click="OnModuleClick(module)">
                                      <i class="fa fa-file-text"></i>{{module.moduleName}}
                                  </a>
                                  <div class="sub-menu x-menu center-position">
                                      <a href="#module" ng-click="OnClose()">
                                          <i class="fa fa-times"></i>
                                      </a>
                                      <span class="sub-menu-btn">
                                          <i class="fa fa-edit text-info" ng-click="OnPutData('Module','put', module)"></i>
                                          <i class="fa fa-trash text-danger" ng-click="OnDeleteData('Module', module.modlueId)"></i>
                                      </span>
                                      <a href="#module-{{module.moduleId}}" class="sub-menu-text">
                                          <i class="fa fa-circle"></i> {{module.moduleDescription}}
                                      </a>
                                      <span class="float-right" ng-if="module.Exercises.length > 1"><button class="btn btn-sm btn-primary" ng-click="OnMoveData('Exercise', module.Exercises)"><i class="fa fa-undo"></i>&nbsp;{{RExercise}}</button></span>
                                      <span class="float-right"><button class="btn btn-sm btn-primary" ng-click="OnPostData('Exercise', 'post', module.moduleId)">{{CExercise}}</button></span>
                                  </div>
                              </li>
                          </ul>
                      </div>
                  </div>

                  @*exercise*@
                  <div class="col" ng-if="Exercises.length > 0">
                      <div class="main-menu">
                          <ul ng-repeat="exercise in Exercises" id="exercise">
                              @*status: false*@
                              <li class="item-c" id="exercise-{{exercise.exerciseId}}" ng-if="!exercise.exerciseStatus">
                                  <a href="#exercise-{{exercise.exerciseId}}" class="profile-btn js--box">
                                      <i class="fa fa-file-text"></i>{{exercise.exerciseName}}
                                  </a>
                                  <div class="sub-menu x-menu center-position">
                                      <a href="#exercise" ng-click="OnRestore('Exercise', exercise.exerciseId)">
                                          <i class="fa fa-refresh" style="color: blue; padding-right: 5px"> &nbsp; Restore data</i>
                                      </a>
                                  </div>
                              </li>
                              @*status: ture*@
                              <li class="item-c" id="Exercise-{{exercise.exerciseId}}" ng-if="exercise.exerciseStatus">
                                  <a href="#Exercise-{{exercise.exerciseId}}" class="profile-btn js--box" ng-click="OnExerciseClick(exercise)">
                                      <i class="fa fa-file-text"></i>{{exercise.exerciseName}}
                                  </a>
                                  <div class="sub-menu x-menu center-position">
                                      <a href="#exercise" ng-click="OnClose()">
                                          <i class="fa fa-times"></i>
                                      </a>
                                      <span class="sub-menu-btn">
                                          <i class="fa fa-edit text-info" ng-click="OnPutData('Exercise', 'put', exercise)"></i>
                                          <i class="fa fa-trash text-danger" ng-click="OnDeleteData('Exercise', exercise.exerciseId)"></i>
                                      </span>
                                      <a href="#Exercise-{{exercise.exerciseId}}" class="sub-menu-text">
                                          <i class="fa fa-circle"></i> {{exercise.exerciseDescription}}
                                      </a>
                                      <span class="float-right" ng-if="exercise.Tasks.length > 1"><button class="btn btn-sm btn-primary" ng-click="OnMoveData('Task', exercise.Tasks)"><i class="fa fa-undo"></i>&nbsp;{{RTask}}</button></span>
                                      <span class="float-right"><button class="btn btn-sm btn-primary" ng-click="OnPostData('Task', 'post', exercise.exerciseId)">{{CTask}}</button></span>
                                  </div>
                              </li>
                          </ul>
                      </div>
                  </div>

                  @*task*@
                  <div class="col" ng-if="Tasks.length > 0">
                      <div class="main-menu">
                          <ul ng-repeat="task in Tasks" id="task">
                              @*status: false*@
                              <li class="item-c" id="task-{{task.taskId}}" ng-if="!task.taskStatus">
                                  <a href="#task-{{task.taskId}}" class="profile-btn js--box">
                                      <i class="fa fa-file-text"></i>{{task.taskName}}
                                  </a>
                                  <div class="sub-menu x-menu center-position">
                                      <a href="#task" ng-click="OnRestore('Task', task.taskId)">
                                          <i class="fa fa-refresh" style="color: blue; padding-right: 5px"> &nbsp; Restore data</i>
                                      </a>
                                  </div>
                              </li>
                              @*status: ture*@
                              <li class="item-c" id="Task-{{task.taskId}}" ng-if="task.taskStatus">
                                  <a href="#Task-{{task.taskId}}" class="profile-btn js--box">
                                      <i class="fa fa-file-text"></i>{{task.taskName}}
                                  </a>
                                  <div class="sub-menu x-menu center-position">
                                      <a href="#task" ng-click="OnClose()">
                                          <i class="fa fa-times"></i>
                                      </a>
                                      <span class="sub-menu-btn">
                                          <i class="fa fa-edit text-info" ng-click="OnPutData('Task', 'put', task)"></i>
                                          <i class="fa fa-trash text-danger" ng-click="OnDeleteData('Task', task.taskId)"></i>
                                      </span>
                                      <a href="#Task-{{task.taskId}}" class="sub-menu-text">
                                          <i class="fa fa-circle"></i> {{task.taskDescription}}
                                      </a>
                                      @*<span class="float-right"><button class="btn btn-sm btn-primary">+ create Task</button></span>*@
                                  </div>
                              </li>
                          </ul>
                      </div>
                  </div>
              </div>
              @*</>*@

              @*Insert data Modal*@
              <div id="id01" class="modal">
                  <span ng-click="OnCancel()" class="close" title="Close Modal">&times;</span>
                  <form name="myForm" id="mFormId" class="modal-content" ng-submit="OnSubmitData()">
                      <div class="container">
                          <h1 class="text-center">Insert {{insert}} Form</h1>
                          <input type="hidden" class="insert-data" ng-model="form.id" required>
                          <div class="row">
                              <div class="col label-class">
                                  <label for="name"><b>Name</b></label>
                              </div>
                              <div class="col my-auto">
                                  <input type="text" class="insert-data" ng-model="form.name" placeholder="Enter Name" name="name" required><br />
                                  <span ng-if="myForm.name.$invalid && myForm.name.$touched" class="text-danger">**Name is required</span><br />
                              </div>
                          </div>
                          <div class="row">
                              <div class="col label-class">
                                  <label for="description"><b>Description</b></label>
                              </div>
                              <div class="col my-auto">
                                  <input type="text" class="insert-data" ng-model="form.description" placeholder="Enter Description" name="description"><br />
                              </div>
                          </div>
                          <div class="row" ng-if="insert=='Exercise'">
                              <div class="col label-class">
                                  <label for="Category"><b>Category</b></label>
                              </div>
                              <div class="col my-auto">
                                  <input type="text" class="insert-data" ng-model="form.category" placeholder="Category" name="Category"><br />
                              </div>
                          </div>

                          <div class="clearfix modelBtn">
                              <button type="button" ng-click="OnCancel()" class="btn btn-secondary btn-lg">Cancel</button>
                              <button type="submit" ng-disabled="myForm.$invalid || myForm.$pending" class="btn btn-primary btn-lg" value="submit" id="submit" name="submit">submit</button>
                          </div>
                      </div>
                  </form>
              </div>


              @*rearrangment Data modal*@
              <div id="id02" class="modal">
                  <span ng-click="OnCancel()" class="close" title="Close Modal">&times;</span>
                  <form name="rearrangeForm" id="rFormId" class="modal-content" ng-submit="handleRearrangeData()">
                      <div class="container text-center">
                          <h1>Rearrangment {{insert}} Data</h1>
                          <table class="table table-dark table-striped">
                              <thead>
                                  <tr>
                                      <th scope="col">#</th>
                                      <th scope="col">Name</th>
                                      <th scope="col">Position</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  <tr ng-repeat="data in RearrangeData" class="rearrange-th" let tabindex="index">
                                      <th scope="row"><input type="text" ng-init="arrangeData.id[$index] = data[idRD]" ng-value="data[idRD]" required readonly /></th>
                                      <td>{{data[nameRD]}}</td>
                                      <td>
                                          <input type="text" name="position" ng-model="arrangeData.position[$index]" required><br />
                                          <span ng-if="rearrangeForm.position.$invalid && rearrangeForm.position.$touched" class="text-danger">**Position is required</span><br />
                                          <span ng-pattern="isNumber" class="text-danger">**Position must be number</span><br />
                                      </td>
                                  </tr>
                              </tbody>
                          </table>
                          <div class="clearfix modelBtn">
                              <button type="button" ng-click="OnCancel()" class="btn btn-secondary btn-lg">cancle</button>
                              <button type="submit" ng-disabled="rearrangeForm.$invalid || rearrangeForm.$pending" class="btn btn-primary btn-lg" value="submit" id="submit" name="submit">submit</button>
                          </div>
                      </div>
                  </form>
              </div>

          </div>
      </div>
  </body>
</html>
